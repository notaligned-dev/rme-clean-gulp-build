# Rem Markup Engine — Чистая сборка Gulp

[:us: English language](README.md)

> [!NOTE] 
> Сборка находится в **бете**. API и структура могут измениться  до выхода первой стабильной версии.

Эта сборка предназначена для быстрой и удобной разработки вебсайтов. Никаких лишних модулей, чистый и минималистичный набор для разработки вебсайтов без frontend-фреймворков.

Для кого подойдёт сборка?
- Темы для CMS (преимущественно Wordpress, OpenCart)
- Вебсайты без frontend-фреймворков
- Статичная вёрстка

## Быстрый старт

Перед началом установки убедитесь, что у вас установлено всё необходимое:
- Node.js >= 24
- npm >= 11

> [!TIP]
> Перечисленные требования взяты с системы, на которой проект был собран и работал стабильно, из-за чего указаны довольно свежие версии программ. Сборка может работать стабильно и на более ранних версиях.

### Шаг 1.

У вас есть два варианта: 
1. **Рекомендованный**: скачать последнюю версию сборки [здесь](https://github.com/notaligned-dev/rme-clean-gulp-build/releases).
2. Клонировать репозиторий по HTTPS в желаемую папку. Чтобы это сделать, запустите следующую команду в консоли:
 
```
git clone --recurse-submodules https://github.com/notaligned-dev/rme-clean-gulp-build.git
```

### Шаг 2.

Откройте терминал в папке с файлами проекта и запустите следующую команду:

```
npm install
```

Дождитесь конца установки и убедитесь, что всё прошло успешно.

### Шаг 3 (Необязательный)

Настройте конфигурацию (файл по пути `gulpfile.js/config.js`), изменив следующие константы.

1. `sourceFolder` — папка для исходников
2. `buildFolder` — папка для собранных ресурсов
3. `isProxy` — установите значение `true`, если вы работаете со своим локальным сервером и хотите использовать на нём автоматическую перезагрузку браузера.
    1. `localWebsiteURL` — поменяйте на домен своего локального сервера, если включили параметр `isProxy`

### Шаг 4.

Всё готово! Для запуска Gulp введите одну из команд ниже в консоли:
- `gulp` — по умолчанию запускает задачу `dev` (от *development* - разработка)
- `gulp build` — собирает файлы для боевого сайта
- `gulp lint` — запускает линтинг JS файлов (проверка ошибок)

С этого момента Gulp должен работать. **Настоятельно рекомендуется** прочитать секцию *[Принцип работы](#user-content-принцип-работы)*

## Принцип работы

После запуска Gulp обрабатывает ваши файлы, чтобы сделать их оптимальными для разработки или боевого сайта.

`gulp dev` пересобирает файлы при каждом изменении. SCSS превращается в CSS, JS обрабатывается через Babel для наилучшей поддержки старых браузеров.
Он также включает быструю перезагрузку браузера. Чтобы воспользоваться ей, откройте URL сервера `browser-sync`, отображаемый в консоли, либо добавьте его порт к вашему локальному домену (перед параметрами).


`gulp build` собирает файлы один раз, а затем оптимизирует их. Вдобавок к задаче `dev` CSS файл минифицируется и дополняется префиксами для кросс-браузерной поддержки, а изображения превращаются в формат `.webp`. 

## Возможности и инструменты
Сборка включает в себя следующее:
- SCSS
    1. Автопрефиксер и минификация для боевого сайта
    2. Sourcemaps (карты кода)
- JS
    1. Сборщик ESBuild
    2. Babel для поддержки старых браузеров
    3. Скрипт для линтера (запускается отдельно)
- Быстрая перезагрузка браузера
- Конвертация изображений в `webp`
- Отображение ошибок

Проект использует [Rem Markup Engine Theme](https://github.com/notaligned-dev/rem-markup-engine-theme) в качестве сабмодуля для исходников ресурсов (не обязательно)

> [!NOTE]
> Если вы не знакомы с технологиями SCSS или Babel, вам следует ознакомиться с документацией в официальных источниках.

## Структура папок

Эта структура файлов, необходимая для корректной работы сборки. Вы можете менять пути и логику внутри файлов Gulp.

```powershell
rme-clean-gulp-build
├───gulpfile.js         # все файлы gulp
│   ├───globals
│   ├───tasks 
│   ├───config.js       # конфигурация сборки
│   └───index.js        # точка входа gulp
├───src
│   └───assets
│       ├───fonts
│       ├───img
│       ├───js
│       │   └───libs
│       ├───scss        # рекомендованная структура файлов - DART SASS 3.0
│       ├───theme       # сабмодуль rme-theme (не обязательно)
│       └───videos
├───.eslintrc.json      # конфигурация esbuild
├───babel.config.js     # конфигурация babel
├───LICENSE
├───package-lock.json
├───package.json 
└───README.ru.md        # Вы находитесь здесь
```

## Лицензия

GNU General Public License v3.0